(this.webpackJsonplambdavibe=this.webpackJsonplambdavibe||[]).push([[0],{21:function(e,t,n){e.exports={wrapper:"guitar-style_wrapper__2DBJa",guitarImg:"guitar-style_guitarImg__2Mf_g",lineBox:"guitar-style_lineBox__3-I_g",line:"guitar-style_line__20FLl"}},25:function(e,t,n){e.exports={wrapper:"recorder_wrapper__86YRn",recorderImg:"recorder_recorderImg__1EAMu",lineBox:"recorder_lineBox__287FM",line:"recorder_line__1Ql6J"}},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(30),s=n.n(r),c=n(5),o=n(19),l=n(7),u=n(8),d=n(62),h=n(2),b=n(3),g=n(10),j=Object(h.a)((function e(t,n){Object(b.a)(this,e),this.type=void 0,this.args=void 0,this.type=t,this.args=Object(g.d)(n)}));function f(e,t){var n=t.type,i=t.args;console.debug("".concat(n));var a=function(){switch(n){case"SET_SONGS":var t=i.get("songs");return e.set("songs",t);case"PLAY_SONG":var a=e.get("songs").find((function(e){return e.get("id")===i.get("id")})).get("notes");return e.set("notes",a);case"STOP_SONG":return e.delete("notes");case"SET_LOCATION":var r,s=i.getIn(["location","pathname"],""),c=i.getIn(["location","search"],""),o=s.substring(1),l=null!==(r=new URLSearchParams(c.substring(1)).get("visualizer"))&&void 0!==r?r:"",u=e.get("instruments"),d=e.get("visualizers"),h=u.find((function(e){return e.name===o})),b=d.find((function(e){return e.name===l}));return e.set("instrument",h).set("visualizer",b);case"SEARCH_SONG":var g=i.get("searchValue");return e.set("searchValue",g);default:return console.error("type unknown: ".concat(n,"\n"),i.toJS()),e}}();return console.debug(a.update("socket",(function(e){return e?"[socket]":e})).toJS()),a}var v=n(4),m=Object(h.a)((function e(t,n){Object(b.a)(this,e),this.name=void 0,this.component=void 0,this.name=t,this.component=n}));function p(e){var t=e.name;return Object(v.jsx)("div",{className:"w-100 h3 bb b--light-gray flex justify-between items-center ph4",children:Object(v.jsx)("div",{children:t})})}var x=function(e){var t=e.instrument,n=e.state,a=e.dispatch,r=t.component,s=Object(i.useState)(new u.e({oscillator:{type:"sine"}}).toDestination()),o=Object(c.a)(s,2),l=o[0],d=o[1],h=n.get("notes");return Object(i.useEffect)((function(){if(h&&l){var e=h.split(" "),t=e.map((function(e,t){return{idx:t,time:"+".concat(t/4),note:e,velocity:1}}));return new u.c((function(t,n){l.triggerAttackRelease(n.note,"4n",t,n.velocity),n.idx===e.length-1&&a(new j("STOP_SONG"))}),t).start(0),u.f.start(),function(){u.f.cancel()}}return function(){}}),[h,l,a]),Object(v.jsxs)("div",{children:[Object(v.jsx)(p,{name:t.name}),Object(v.jsx)("div",{className:"bg-white absolute right-0 left-0",style:{top:"4rem"},children:Object(v.jsx)(r,{name:t.name,state:n,dispatch:a,synth:l,setSynth:d})})]})},O=n(18),w=n.n(O),y=n(61),k=function(e){var t=e.title,n=e.children;return Object(v.jsxs)("div",{className:"flex flex-column h-25 bb b--light-gray pa3",children:[Object(v.jsxs)("div",{className:"fw7 mb2",children:[t," "]}),Object(v.jsx)("div",{className:"flex-auto overflow-scroll",children:n})]})};function N(e){var t=e.to,n=e.text,i=e.active,a=e.onClick;return Object(v.jsx)(o.b,{to:t,className:"no-underline",children:Object(v.jsxs)("div",{className:w()("f6 flex items-center black",{fw7:i}),onClick:a,children:[i?Object(v.jsx)(y.b,{className:"mr1"}):Object(v.jsx)(y.a,{className:"mr1"}),Object(v.jsx)("div",{className:"dim",children:n})]})})}function S(e){var t,n=e.state,i=n.get("instruments"),a=null===(t=n.get("instrument"))||void 0===t?void 0:t.name,r=Object(l.f)();return Object(v.jsx)(k,{title:"Instruments",children:i.map((function(e){return Object(v.jsx)(N,{to:"/".concat(e.name).concat(r.search),text:e.name,active:e.name===a,onClick:function(){return console.log(e.name)}},e.name)}))})}function E(e){var t,n=e.state,i=n.get("visualizers"),a=null===(t=n.get("visualizer"))||void 0===t?void 0:t.name,r=Object(l.f)();return Object(v.jsx)(k,{title:"Visualizers",children:i.map((function(e){return Object(v.jsx)(N,{to:{pathname:r.pathname,search:"?visualizer=".concat(e.name)},text:e.name,active:e.name===a,onClick:function(){return console.log(e.name)}},e.name)}))})}function A(e){var t,n=e.state,i=e.dispatch;return t=n.get("searchValue",String),Object(v.jsx)("input",{type:"text",placeholder:"Search..",value:t,onChange:function(e){i(new j("SEARCH_SONG",{searchValue:e.target.value})),t=n.get("searchValue")}})}function C(e){var t=e.state,n=e.dispatch,i=t.get("songs",Object(g.a)()),a=void 0===t.get("searchValue")?"":t.get("searchValue");return Object(v.jsx)(k,{title:"Playlist",children:i.filter((function(e){var t=e.get("songTitle"),n=e.get("album"),i=e.get("artist");return t.includes(a)||n.includes(a)||i.includes(a)})).map((function(e){return Object(v.jsxs)("div",{className:"f6 pointer underline flex items-center no-underline i dim",style:{paddingBottom:"12px"},onClick:function(){return n(new j("PLAY_SONG",{id:e.get("id")}))},children:[Object(v.jsx)(d.a,{className:"mr1"}),e.get("songTitle")," from ",e.get("album")," by ",e.get("artist")]},e.get("id"))}))})}function G(e){var t=e.state,n=e.dispatch;return Object(v.jsxs)("div",{className:"absolute top-0 left-0 bottom-0 w5 z-1 shadow-1 bg-white flex flex-column",children:[Object(v.jsx)("div",{className:"h3 fw7 f5 flex items-center pl3 bb b--light-gray",children:"Music App"}),Object(v.jsxs)("div",{className:"flex-auto",children:[Object(v.jsx)(S,{state:t,dispatch:n}),Object(v.jsx)(E,{state:t,dispatch:n}),Object(v.jsx)(A,{state:t,dispatch:n}),Object(v.jsx)(C,{state:t,dispatch:n})]})]})}var _=n(32),D=n.n(_),T=Object(h.a)((function e(t,n){Object(b.a)(this,e),this.name=void 0,this.draw=void 0,this.name=t,this.draw=n}));function B(e){var t=e.visualizer,n=t.name,a=t.draw,r=Object(i.useMemo)((function(){return new u.a("waveform",256)}),[]),s=Object(i.useCallback)((function(e){var t=window.innerWidth,n=window.innerHeight/2;e.resizeCanvas(t,n,!1)}),[]);Object(i.useEffect)((function(){return u.g().volume.value=-5,u.g().connect(r),function(){u.g().disconnect(r)}}),[r]);return Object(v.jsxs)("div",{className:"bg-black absolute bottom-0 right-0 left-0 h-50",children:[Object(v.jsx)("div",{className:"z-1 absolute left-0 top-0 pa4 white f5",children:n}),Object(v.jsx)(D.a,{setup:function(e,t){var n=window.innerWidth,i=window.innerHeight/2;e.createCanvas(n,i).parent(t)},draw:function(e){return a(e,r)},windowResized:s})]})}function F(e){var t=e.state,n=e.dispatch,i=t.get("instrument");return Object(v.jsx)("div",{children:i&&Object(v.jsx)(x,{state:t,dispatch:n,instrument:i})})}function R(e){var t=e.state,n=(e.dispatch,t.get("visualizer"));return Object(v.jsx)("div",{children:n&&Object(v.jsx)(B,{visualizer:n},n.name)})}function M(e){var t=e.state,n=e.dispatch;return Object(v.jsxs)("div",{className:"absolute right-0 bottom-0 top-0 flex flex-column",style:{left:"16rem"},children:[Object(v.jsx)(F,{state:t,dispatch:n}),Object(v.jsx)(R,{state:t,dispatch:n})]})}function z(){return Object(v.jsx)("div",{className:"absolute right-0 bottom-0 top-0 flex flex-column items-center justify-center",style:{left:"16rem"},children:Object(v.jsxs)("div",{className:"mw6 lh-copy mb4",children:[Object(v.jsx)(d.b,{}),Object(v.jsx)("div",{className:"f3 fw7 mb2",children:"Welcome to the case study."}),Object(v.jsx)("div",{className:"f4 mb3",children:"Select an instrument and a visualizer on the left to serve some fresh beats."}),Object(v.jsx)("div",{className:"f5",children:"The UI is yours to design. Express yourself."})]})})}function I(e){var t=e.state,n=e.dispatch,a=Object(l.f)(),r=!t.get("instrument");return console.log("INSTRUMENT",r),Object(i.useEffect)((function(){n(new j("SET_LOCATION",{location:a}))}),[n,a]),Object(v.jsxs)("div",{className:"fixed top-0 left-0 h-100 w-100 bg-white",onClick:function(){return u.h()},children:[Object(v.jsx)(G,{state:t,dispatch:n}),r?Object(v.jsx)(z,{}):Object(v.jsx)(M,{state:t,dispatch:n})]})}function L(e){var t=e.note,n=e.synth,i=e.minor,a=e.index;return Object(v.jsx)("div",{onMouseDown:function(){return null===n||void 0===n?void 0:n.triggerAttack("".concat(t))},onMouseUp:function(){return null===n||void 0===n?void 0:n.triggerRelease("+0.25")},className:w()("ba pointer absolute dim",{"bg-black black h3":i,"black bg-white h4":!i}),style:{top:0,left:"".concat(2*a,"rem"),zIndex:i?1:0,width:i?"1.5rem":"2rem",marginLeft:i?"0.25rem":0}})}function W(e){var t=e.title,n=e.onClick,i=e.active;return Object(v.jsx)("div",{onClick:n,className:w()("dim pointer ph2 pv1 ba mr2 br1 fw7 bw1",{"b--black black":i,"gray b--light-gray":!i}),children:t})}var V=new m("Piano",(function(e){var t=e.synth,n=e.setSynth,i=Object(g.a)([{note:"C",idx:0},{note:"Db",idx:.5},{note:"D",idx:1},{note:"Eb",idx:1.5},{note:"E",idx:2},{note:"F",idx:3},{note:"Gb",idx:3.5},{note:"G",idx:4},{note:"Ab",idx:4.5},{note:"A",idx:5},{note:"Bb",idx:5.5},{note:"B",idx:6}]),a=Object(g.a)(["sine","sawtooth","square","triangle","fmsine","fmsawtooth","fmtriangle","amsine","amsawtooth","amtriangle"]);return Object(v.jsxs)("div",{className:"pv4",children:[Object(v.jsx)("div",{className:"relative dib h4 w-100 ml4",children:Object(g.c)(2,7).map((function(e){return i.map((function(n){var i=-1!==n.note.indexOf("b"),a="".concat(n.note).concat(e);return Object(v.jsx)(L,{note:a,synth:t,minor:i,octave:e,index:7*(e-2)+n.idx},a)}))}))}),Object(v.jsx)("div",{className:"pl4 pt4 flex",children:a.map((function(e){var i;return Object(v.jsx)(W,{title:e,onClick:function(){return t=e,void n((function(e){return e.disconnect(),new u.e({oscillator:{type:t}}).toDestination()}));var t},active:(null===t||void 0===t||null===(i=t.oscillator)||void 0===i?void 0:i.type)===e},e)}))})]})})),P=n.p+"static/media/pan.ef47b30f.jpg",H=n(25),J=n.n(H);function q(e){var t=e.index,n=e.synth,i=e.notes;return Object(v.jsx)("div",{style:{top:15*(t-1)+"px"},className:J.a.line,children:i.map((function(e){return Object(v.jsx)("div",{onClick:function(){return function(e){null===n||void 0===n||n.triggerAttackRelease(e,.25)}(e)}},e)}))})}var U=new m("Panflute",(function(e){var t=e.synth,n=e.setSynth;return Object(v.jsxs)("div",{className:J.a.wrapper,children:[Object(v.jsx)("img",{alt:"",src:P,draggable:"false",onLoad:function(){n((function(e){e.disconnect();var t=new u.b({oscillator:{type:"square"},envelope:{attack:.1}}).toDestination();return t.set({detune:-800,portamento:10}),t}))}}),Object(v.jsx)("div",{className:J.a.lineBox,children:[["C3","D3","E3","F3","G3","A4","B4","C4","D4","E4","F4","A5","B5"]].map((function(e,n){return Object(v.jsx)(q,{synth:t,index:n,notes:e},n)}))})]})})),Y=new T("Waveform",(function(e,t){var n=window.innerWidth,i=window.innerHeight/2,a=Math.min(n,i);e.background(0,0,0,255),e.strokeWeight(.01*a),e.stroke(255,255,255,255),e.noFill();var r=t.getValue();e.beginShape();for(var s=0;s<r.length;s++){var c=r[s],o=e.map(s,0,r.length-1,0,n),l=i/2+c*i;e.vertex(o,l)}e.endShape()})),Q=new T("Truman Waveform",(function(e,t){var n=window.innerWidth,i=window.innerHeight/2,a=Math.min(n,i),r=t.getValue();e.background(0,0,0,255),e.strokeWeight(.01*a),e.stroke(255,255,255,255),e.noFill(),e.beginShape();for(var s=0;s<r.length;s++){var c=r[e.floor(e.map(s,0,n,0,r.length))],o=e.map(s,0,r.length-1,0,n),l=300*c+i/2;e.vertex(o,l)}e.endShape(),e.translate(n/2.5,i/2);for(var u=-1;u<=1;u+=2){e.beginShape();for(s=0;s<=180;s++){var d=r[e.floor(e.map(s,0,180,0,r.length-1))],h=e.map(d,-1,1,150,350);o=h*e.sin(s)*u,l=h*e.cos(s);e.vertex(o,l)}e.endShape()}e.ellipse(0,0,200);for(var b=0;b<r.length;b++)e.rotate(r.length),e.stroke("white"),e.line(10,100,0,200*Number(r[b]))})),X=n.p+"static/media/guitar.f91bea88.svg",K=n(21),Z=n.n(K);function $(e){var t=e.index,n=e.synth,i=e.notes;return Object(v.jsx)("div",{style:{top:15*(t-1)+"px"},className:Z.a.line,children:i.map((function(e){return Object(v.jsx)("div",{onClick:function(){return function(e){null===n||void 0===n||n.triggerAttackRelease(e,.2)}(e)}},e)}))})}var ee=new m("Guitar",(function(e){var t=e.synth;return e.setSynth,Object(v.jsxs)("div",{className:Z.a.wrapper,children:[Object(v.jsx)("img",{alt:"",src:X,className:Z.a.guitarImg}),Object(v.jsx)("div",{className:Z.a.lineBox,children:[["C#5","D#4","A#8"],["B6","E2","F7"],["A#1","F8","B3"]].map((function(e,n){return Object(v.jsx)($,{synth:t,index:n,notes:e},n)}))})]})})),te=new T("newform",(function(e,t){var n=window.innerWidth,i=window.innerHeight/2,a=t.getValue(),r=a.length;e.background(230);for(var s=0;s<a.length;s++){var c=Math.floor(i),o=n/a.length,l=s*o,u=Math.floor(i/4)-c*Number(a[s]);e.rect(2*l,u+40,o,c*Number(a[s]))}e.translate(n/2.5,i/1.5),e.stroke(0,0,255),e.ellipse(0,0,200);for(var d=0;d<r;d++)e.rotate(2*Math.PI/r),e.stroke(255,0,0),e.line(10,100,0,200*Number(a[d]))})),ne=n.p+"static/media/recorder.4bf95249.png";function ie(e){var t=e.note,n=e.synth,i=e.index;e.duration;return Object(v.jsx)("div",{style:{height:"10px",width:"15px",background:"black",opacity:".3",position:"absolute",top:"50px",left:"".concat(106+40*i+i/3,"px"),borderRadius:"2px"},onClick:function(){null===n||void 0===n||n.triggerAttackRelease("".concat(t),"8n")}})}var ae=new m("Flute",(function(e){var t=e.synth,n=e.setSynth,i=Object(g.a)([{note:"C4",index:0},{note:"D4",index:1},{note:"E4",index:2},{note:"F4",index:3},{note:"G4",index:4},{note:"A4",index:5},{note:"B4",index:6}]);return Object(v.jsx)("div",{style:{display:"flex",textAlign:"center",width:"640px",height:"408px"},children:Object(v.jsxs)("div",{style:{userSelect:"none",position:"relative"},children:[Object(v.jsx)("img",{src:ne,alt:"pic",draggable:"false",onLoad:function(){n((function(e){e.disconnect();var t=new u.d(u.e,{oscillator:{type:"triangle"}}).toDestination();return t.set({detune:-800,portamento:10}),t}))}}),i.map((function(e){return Object(v.jsx)(ie,{note:e.note,synth:t,index:e.index,duration:"8n"})}))]})})})),re=new T("Test Vis",(function(e,t){var n=window.innerWidth,i=n/2/64,a=window.innerHeight/2;t.type="fft";var r=t.getValue();e.beginShape();for(var s=0;s<r.length;s++){e.fill(3*s,255,255);var c=r[s],o=e.map(c,0,256,a/2,350);e.rect(n/2+s*i,o,i,a-o),e.rect(n/2-s*i,o,i,a-o)}e.endShape()})),se=n.p+"static/media/xylophone.ba1d900b.png";function ce(e){var t=e.note,n=e.synth,a=e.index,r=e.top,s=e.height,o=e.color,l=Object(i.useState)(".3"),u=Object(c.a)(l,2),d=u[0],h=u[1];return Object(v.jsx)("div",{style:{height:"".concat(s,"px"),width:"58px",background:"".concat(o),opacity:"".concat(d),position:"absolute",top:"".concat(r,"px"),left:"".concat(17+78*a+a/3,"px"),borderRadius:"18px"},onClick:function(){null===n||void 0===n||n.triggerAttackRelease("".concat(t),"8n")},onMouseEnter:function(){return h(".5")},onMouseLeave:function(){return h(".3")}})}var oe=new m("Thien's Xylophone",(function(e){var t=e.synth,n=e.setSynth,a=Object(g.a)([{note:"C5",index:0,top:11,height:388,color:"red"},{note:"D5",index:1,top:44,height:356,color:"orange"},{note:"E5",index:2,top:76,height:324,color:"yellow"},{note:"F5",index:3,top:98,height:304,color:"green"},{note:"G5",index:4,top:129,height:272,color:"cyan"},{note:"A5",index:5,top:150,height:252,color:"blue"},{note:"B5",index:6,top:172,height:230,color:"purple"},{note:"C6",index:7,top:192,height:210,color:"pink"}]),r=Object(i.useCallback)((function(e){switch(e.keyCode){case 49:null===t||void 0===t||t.triggerAttackRelease("C5","8n");break;case 50:null===t||void 0===t||t.triggerAttackRelease("D5","8n");break;case 51:null===t||void 0===t||t.triggerAttackRelease("E5","8n");break;case 52:null===t||void 0===t||t.triggerAttackRelease("F5","8n");break;case 53:null===t||void 0===t||t.triggerAttackRelease("G5","8n");break;case 54:null===t||void 0===t||t.triggerAttackRelease("A5","8n");break;case 55:null===t||void 0===t||t.triggerAttackRelease("B5","8n");break;case 56:null===t||void 0===t||t.triggerAttackRelease("C6","8n")}}),[t]);return Object(i.useEffect)((function(){return document.addEventListener("keydown",r,!1),function(){document.removeEventListener("keydown",r,!1)}})),Object(v.jsx)("div",{style:{display:"flex",textAlign:"center",width:"640px",height:"408px"},children:Object(v.jsxs)("div",{style:{userSelect:"none",position:"relative"},children:[Object(v.jsx)("img",{src:se,alt:"pic",draggable:"false",onLoad:function(){n((function(e){return e.disconnect(),new u.b({oscillator:{type:"square8"},envelope:{attack:.01,decay:1.6,sustain:0,release:1},filterEnvelope:{attack:.01,decay:.7,sustain:.1,release:.8,baseFrequency:300,octaves:2}}).toDestination()}))}}),a.map((function(e){return Object(v.jsx)(ce,{note:e.note,synth:t,index:e.index,height:e.height,top:e.top,color:e.color})})),Object(v.jsx)("input",{type:"hidden"})]})})})),le=new T("Thien's Spiral",(function(e,t){var n=window.innerWidth,i=window.innerHeight/2,a=Math.min(n,i);e.background(0,0,0,255);var r=t.getValue(),s=n-256,c=0,o=[[255,0,0],[255,127,0],[255,255,0],[0,255,0],[0,0,255],[75,0,130],[148,0,211]],l=0,u=0;e.beginShape();for(var d=0;d<2*r.length;d++){u>=r.length&&(u=0),e.stroke(o[l][0],o[l][1],o[l][2],150);var h=r[u],b=100+400*h,g=3*s/4+b*Math.cos(c),j=i/2+b*Math.sin(c);(l+=1)>6&&(l=0),e.strokeWeight(.015*a),e.point(g,j),c+=.0122,d<r.length&&(g=s/4+(b=100+400*h)*Math.cos(2*c),j=i/2+b*Math.sin(2*c),e.point(g,j)),u+=1}e.strokeWeight(.015*a),e.endShape()})),ue=Object(g.a)([oe,V,U,ee,ae]),de=Object(g.a)([le,Y,Q,te,re]),he=Object(g.b)({instruments:ue,visualizers:de});n(57);var be=function(){var e=Object(i.useReducer)(f,he),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){a(new j("SET_SONGS",{songs:[{id:1,songTitle:"Ode to Joy (Dubstep Remix)",notes:"E4 E4 F4 G4 G4 F4 E4 D4 C4 C4 D4 E4 E4 D4 D4",album:"\r\n\tSymphony 9",artist:"Ludwig van Beethoven"},{id:2,songTitle:"Sonata No.11",notes:"G4 G4 G4 B4 E3 E5 E5 E5 D3 C3 B4 B4 B4 F#4 F#4 F#4 E4",album:"Piano sonata",artist:"Wolfgang Amadeus Mozart"},{id:3,songTitle:"Perfect",notes:"G3 D4 E4 G4 G3 G4 G3 G3 G3 A4 G4 E3 E3 G4 B4",album:'\xf7 ("Divide")',artist:"Ed Sheeran"},{id:4,songTitle:"Canon In D",notes:"D3 A2 B2 F#2 G2 D2 G2 A2 D3 F#5 A2 E5 B2 D5",album:"Canon and Gigue for 3 violins and basso continuo",artist:"Johann Pachelbel"},{id:5,songTitle:"My Heart Will Go On",notes:"F4 G4 G4 D3 A4 G4 F4 G4 C3 C5 A4 F4 D4",album:"Let's Talk About Love",artist:"Celine Dion"},{id:6,songTitle:"Twinkle Twinkle Little Star",notes:"C5 C5 G5 G5 A5 A5 G5 F5 F5 E5 E5 D5 D5 C5",album:"Rhymes for the Nursery",artist:"Jane Taylor"}]}))}),[]),Object(v.jsx)(o.a,{children:Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{path:"/",children:Object(v.jsx)(I,{state:n,dispatch:a})}),Object(v.jsx)(l.a,{path:"/:instrument",children:Object(v.jsx)(I,{state:n,dispatch:a})}),Object(v.jsx)(l.a,{path:"*",children:Object(v.jsx)("div",{children:"404"})})]})})};n(58),n(59);var ge=document.getElementById("root");s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(be,{})}),ge,(function(){console.log("React has loaded.")}))}},[[60,1,2]]]);
//# sourceMappingURL=main.763fa796.chunk.js.map